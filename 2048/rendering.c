#include "include/matrix.h"
#include "stdint.h"

uint16_t tiles[13][16] = {
    {
        // 2
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000110000000,
        0b0000001001000000,
        0b0000000010000000,
        0b0000000100000000,
        0b0000001111000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
    {
        // 4
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000001001000000,
        0b0000001001000000,
        0b0000001111000000,
        0b0000000001000000,
        0b0000000001000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
    {
        // 8
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000110000000,
        0b0000001001000000,
        0b0000000110000000,
        0b0000001001000000,
        0b0000000110000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
    {
        // 16
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000010001100000,
        0b0000110010000000,
        0b0000010011100000,
        0b0000010010010000,
        0b0000111001100000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
    {
        // 32
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000111000110000,
        0b0000000101001000,
        0b0000011000010000,
        0b0000000100100000,
        0b0000111001111000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
    {
        // 64
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000011001001000,
        0b0000100001001000,
        0b0000111001111000,
        0b0000100100001000,
        0b0000011000001000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
    {
        // 128
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0001000110001100,
        0b0011001001010010,
        0b0001000010001100,
        0b0001000100010010,
        0b0011101111001100,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
    {
        // 256
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0011001111001100,
        0b0100101000010000,
        0b0001001110011100,
        0b0010000001010010,
        0b0111101110001100,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
    {
        // 512
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0011110010001100,
        0b0010000110010010,
        0b0011100010000100,
        0b0000010010001000,
        0b0011100111011110,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
    {
        // 1024
        0b0000000000000000,
        0b0000000000000000,
        0b0000001000110000,
        0b0000011001001000,
        0b0000001001001000,
        0b0000001001001000,
        0b0000011100110000,
        0b0000000000000000,
        0b0000011001001000,
        0b0000100101001000,
        0b0000001001111000,
        0b0000010000001000,
        0b0000111100001000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
    {
        // 2048
        0b0000000000000000,
        0b0000000000000000,
        0b0000011000110000,
        0b0000100101001000,
        0b0000001001001000,
        0b0000010001001000,
        0b0000111100110000,
        0b0000000000000000,
        0b0000100100110000,
        0b0000100101001000,
        0b0000111100110000,
        0b0000000101001000,
        0b0000000100110000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
    {
        // 4096
        0b0000000000000000,
        0b0000000000000000,
        0b0000100100110000,
        0b0000100101001000,
        0b0000111101001000,
        0b0000000101001000,
        0b0000000100110000,
        0b0000000000000000,
        0b0000011000110000,
        0b0000100101000000,
        0b0000011101110000,
        0b0000000101001000,
        0b0000011000110000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
    {
        // 8192
        0b0000000000000000,
        0b0000000000000000,
        0b0000011000100000,
        0b0000100101100000,
        0b0000011000100000,
        0b0000100100100000,
        0b0000011001110000,
        0b0000000000000000,
        0b0000011000110000,
        0b0000100101001000,
        0b0000011100010000,
        0b0000000100100000,
        0b0000011001111000,
        0b0000000000000000,
        0b0000000000000000,
        0b0000000000000000,
    },
};

MatrixColor tile_colors[13];

void render_tile(uint8_t x, uint8_t y, uint8_t tile_num) {
    int i, j;

    MatrixColor colors[3] = {
        tile_colors[tile_num - 1],
        matrix_color(0, 0, 0),
        matrix_color(0, 0, 0),
    };

    for (i = 0; i < 16; i++) {
        uint16_t row = tiles[tile_num - 1][i]; // row number
        for (j = 0; j < 16; j++) {             // bit number
            uint16_t mask = 1 << (15 - j);     // starting mask from MSB
            int bit_value = (row & mask) ? 1 : 0;
            if (i % 15 == 0 && j % 15 == 0) {
                bit_value = 2;
            }
            matrix_draw_pixel(colors[bit_value], x + j, y + i);
        }
    }
}

void render_init_colors() {
    tile_colors[0] = matrix_color(15, 15, 1);  //2 
    tile_colors[1] = matrix_color(13, 14, 1);  //4 
    tile_colors[2] = matrix_color(11, 13, 1);   //8 
    tile_colors[3] = matrix_color(9, 12, 2);  //16 
    tile_colors[4] = matrix_color(7, 11, 3);  //32
    tile_colors[5] = matrix_color(6, 10, 4);  //64
    tile_colors[6] = matrix_color(5, 9, 5); //128
    tile_colors[7] = matrix_color(4, 10, 6); //256
    tile_colors[8] = matrix_color(3, 11, 7); //512
    tile_colors[9] = matrix_color(2, 12, 9);  //1024
    tile_colors[10] = matrix_color(1, 13, 11); //2048
    tile_colors[11] = matrix_color(0, 14, 13); //4096
    tile_colors[12] = matrix_color(0, 15, 15); //8192 
}
